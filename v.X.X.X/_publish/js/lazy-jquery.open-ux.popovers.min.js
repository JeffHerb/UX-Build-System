(function(e){e.fn.popover=function(t){var n={bEnsurePlacement:!0,iSidePadding:5,iTopPadding:10,placementFunction:function(t,n,r){function b(){left=g-p+linkHalf;if(left+c>i||left<0)return left<0?(t.hasClass("pop-right")&&t.removeClass("pop-right"),0):(t.addClass("pop-right"),i-c-r.iSidePadding)}function w(){if(r.bEnsurePlacement){var n=t.offset().top,i=n+t.outerHeight()+h,s=u+e(window).scrollTop();return i>s?(t.addClass("pop-up"),y-h-r.iTopPadding):(t.hasClass("pop-up")&&t.removeClass("pop-up"),y+t.outerHeight())}return y+t.outerHeight()}var i=0,s=0,o=e(window).width(),u=e(window).height(),a=t.offsetParent(),f=a.outerWidth(),l=a.outerHeight(),c=n.outerWidth(),h=n.outerHeight(),p=c/2,d=0,v=0,m=t.position(),g=m.left,y=m.top;linkHalf=t.outerWidth()/2,linkPosCenter=0,r.bEnsurePlacement?o<f?(i=o,s=u):(i=f,s=l):(i=f,s=l),n.css({top:w(),left:b()})}};return n=e.extend(n,t),this.each(function(t){var r=e(this),i=r.next("div:first"),s=r.parents("ux.content");i.addClass("ux-submenu"),r.on("click",function(e){e.preventDefault(),i.is(":visible")?(r.removeClass("selected"),i.hide()):(r.addClass("selected"),r.css("top")=="auto"&&n.placementFunction(r,i,n),i.show())})})}})(jQuery);